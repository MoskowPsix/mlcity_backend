"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2922],{4635:(e,t,l)=>{l.d(t,{Z:()=>d});var a=l(6252);const o={class:"flex items-center justify-center min-h-screen p-5 bg-gray-100 min-w-screen dark:bg-gray-900"},r=[(0,a._)("div",{class:"flex space-x-2 animate-pulse"},[(0,a._)("div",{class:"w-3 h-3 bg-gray-500 rounded-full"}),(0,a._)("div",{class:"w-3 h-3 bg-gray-500 rounded-full"}),(0,a._)("div",{class:"w-3 h-3 bg-gray-500 rounded-full"})],-1)],s={name:"Loader"},d=(0,l(3744).Z)(s,[["render",function(e,t,l,s,d,i){return(0,a.wg)(),(0,a.iD)("div",o,r)}]])},2922:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ge});var a=l(6252),o=l(2262),r=l(3577),s=l(4908),d=l(9963);const i={class:"main-modal fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster",style:{background:"rgba(0,0,0,.7)"}},n={class:"border border-blue-400 shadow-lg modal-container bg-gray-100 dark:bg-gray-800 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto"},c={class:"modal-content py-6 text-left px-6"},g={class:"flex justify-between items-center pb-3"},x=(0,a._)("p",{class:"text-2xl font-bold text-gray-700 dark:text-gray-300"},"Переименовать роль",-1),u=[(0,a._)("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[(0,a._)("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1)],h={class:"border border-gray-300 dark:border-gray-800 p-6 grid grid-cols-1 gap-6 dark:bg-gray-700 shadow-lg rounded-lg"},y={class:"flex justify-center"},p={class:"flex rounded bg-gray-300 dark:bg-gray-800 items-center p-2"},m={class:"flex justify-end pt-2"},f=(0,a.aZ)({setup:()=>({store_role:(0,s.Z)(),role_name:""}),methods:{closeModal(){this.store_role.closeUpdateModal()},updateRole(e){this.store_role.updateRoleName(e),this.name=""}}});var w=l(3744);const _=(0,w.Z)(f,[["render",function(e,t,l,o,r,s){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",n,[(0,a._)("div",c,[(0,a.kq)("Title"),(0,a._)("div",g,[x,(0,a._)("div",{onClick:t[0]||(t[0]=t=>e.closeModal()),class:"modal-close cursor-pointer z-50"},u)]),(0,a.kq)("Body"),(0,a._)("div",h,[(0,a._)("div",y,[(0,a._)("div",p,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.role_name=t),placeholder:"Имя роли...",class:"bg-gray-300 dark:bg-gray-800 text-gray-600 dark:text-gray-200 max-w-full focus:outline-none"},null,512),[[d.nr,e.role_name]])])])]),(0,a.kq)("Footer"),(0,a._)("div",m,[(0,a._)("button",{onClick:t[2]||(t[2]=t=>e.closeModal()),class:"px-4 bg-gray-400 p-3 rounded-lg text-black hover:bg-gray-300"},"Отмена"),(0,a._)("button",{onClick:t[3]||(t[3]=t=>e.updateRole(e.role_name)),class:"focus:outline-none px-4 bg-blue-500 p-3 ml-3 rounded-lg text-white hover:bg-blue-400"},"Переименовать")])])])])}]]),b={class:"main-modal fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster",style:{background:"rgba(0,0,0,.7)"}},k={class:"border border-green-400 shadow-lg modal-container bg-gray-100 dark:bg-gray-800 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto"},v={class:"modal-content py-6 text-left px-6"},C={class:"flex justify-between items-center pb-3"},M=(0,a._)("p",{class:"text-2xl font-bold text-gray-700 dark:text-gray-300"},"Создать роль",-1),R=[(0,a._)("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[(0,a._)("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1)],Z={class:"border border-gray-300 dark:border-gray-800 p-6 grid grid-cols-1 gap-6 dark:bg-gray-700 shadow-lg rounded-lg"},D={class:"flex justify-center"},L={class:"flex rounded bg-gray-300 dark:bg-gray-800 items-center p-2"},U={class:"flex justify-end pt-2"},j=(0,a.aZ)({setup:()=>({store_role:(0,s.Z)(),role_name:""}),methods:{closeModal(){this.store_role.closeCreateModal()},createRole(e){this.store_role.createRole(e),this.name=""}}}),q=(0,w.Z)(j,[["render",function(e,t,l,o,r,s){return(0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("div",k,[(0,a._)("div",v,[(0,a.kq)("Title"),(0,a._)("div",C,[M,(0,a._)("div",{onClick:t[0]||(t[0]=t=>e.closeModal()),class:"modal-close cursor-pointer z-50"},R)]),(0,a.kq)("Body"),(0,a._)("div",Z,[(0,a._)("div",D,[(0,a._)("div",L,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.role_name=t),placeholder:"Имя роли...",class:"bg-gray-300 dark:bg-gray-800 text-gray-600 dark:text-gray-200 max-w-full focus:outline-none"},null,512),[[d.nr,e.role_name]])])])]),(0,a.kq)("Footer"),(0,a._)("div",U,[(0,a._)("button",{onClick:t[2]||(t[2]=t=>e.closeModal()),class:"px-4 bg-gray-400 p-3 rounded-lg text-black hover:bg-gray-300"},"Отмена"),(0,a._)("button",{onClick:t[3]||(t[3]=t=>e.createRole(e.role_name)),class:"focus:outline-none px-4 bg-teal-500 p-3 ml-3 rounded-lg text-white hover:bg-teal-400"},"Создать")])])])])}]]),z={class:"main-modal fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster",style:{background:"rgba(0,0,0,.2)"}},H={class:"border border-red-400 shadow-lg modal-container bg-gray-100 dark:bg-gray-800 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto"},S={class:"modal-content py-6 text-left px-6"},V={class:"flex justify-between items-center pb-3"},B=(0,a._)("p",{class:"text-2xl font-bold text-gray-700 dark:text-gray-300"},"Удалить пользователя?",-1),I=[(0,a._)("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[(0,a._)("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1)],F={class:"text-1xl font-bold text-gray-600 dark:text-gray-300"},T={class:"flex justify-end pt-2"},N=(0,a.aZ)({setup:()=>({store_role:(0,s.Z)()}),methods:{closeModal(){this.store_role.closeDeleteRole()},DelRole(){this.store_role.deleteRole()}}}),E=(0,w.Z)(N,[["render",function(e,t,l,o,s,d){return(0,a.wg)(),(0,a.iD)("div",z,[(0,a._)("div",H,[(0,a._)("div",S,[(0,a.kq)("Title"),(0,a._)("div",V,[B,(0,a._)("div",{onClick:t[0]||(t[0]=t=>e.closeModal()),class:"modal-close cursor-pointer z-50"},I)]),(0,a.kq)("Body"),(0,a.WI)(e.$slots,"default"),(0,a._)("p",F,"ID: "+(0,r.zw)(e.store_role.role_id),1),(0,a.kq)("Footer"),(0,a._)("div",T,[(0,a._)("button",{onClick:t[1]||(t[1]=t=>e.closeModal()),class:"px-4 bg-gray-400 p-3 rounded-lg text-black hover:bg-gray-300"},"Отмена"),(0,a._)("button",{onClick:t[2]||(t[2]=t=>e.DelRole()),class:"focus:outline-none px-4 bg-red-500 p-3 ml-3 rounded-lg text-grey-300 hover:bg-red-400"},"Удалить")])])])])}]]);var K=l(4635);const Q={class:"container px-4 mx-auto"},W={key:4,class:"flex flex-col"},Y={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},$={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},A={class:"overflow-hidden border border-gray-200 dark:border-gray-700 md:rounded-lg"},G={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},J={class:"bg-gray-50 dark:bg-gray-800"},O=(0,a._)("th",{scope:"col",class:"py-3.5 px-4 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400"},[(0,a._)("div",{class:"flex items-center gap-x-3"},[(0,a._)("button",{class:"flex items-center gap-x-2"},[(0,a._)("span",null,"ID"),(0,a._)("svg",{class:"h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,a._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,a._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,a._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})])])])],-1),P=(0,a._)("th",{scope:"col",class:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400"}," Название ",-1),X=(0,a._)("th",{scope:"col",class:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400"},null,-1),ee={scope:"col",class:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400"},te={class:"px-2 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 whitespace-nowrap"},le={class:"inline-flex items-center gap-x-3"},ae={class:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap"},oe={class:"text-sm font-medium text-gray-800 dark:text-white"},re={class:"px-4 py-4 text-sm whitespace-nowrap"},se={class:"flex items-center gap-x-6"},de=["onClick"],ie={class:"px-4 py-4 text-sm whitespace-nowrap"},ne={class:"flex items-center gap-x-6"},ce=["onClick"],ge={__name:"Role",setup(e){const t=(0,s.Z)();return(e,l)=>((0,a.wg)(),(0,a.iD)("section",Q,[!0===(0,o.SU)(t).loader?((0,a.wg)(),(0,a.j4)(K.Z,{key:0})):(0,a.kq)("v-if",!0),!0===(0,o.SU)(t).ModalUpdate?((0,a.wg)(),(0,a.j4)(_,{key:1})):(0,a.kq)("v-if",!0),!0===(0,o.SU)(t).ModalCreate?((0,a.wg)(),(0,a.j4)(q,{key:2})):(0,a.kq)("v-if",!0),!0===(0,o.SU)(t).ModalDelete?((0,a.wg)(),(0,a.j4)(E,{key:3})):(0,a.kq)("v-if",!0),!1===(0,o.SU)(t).loader?((0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("div",Y,[(0,a._)("div",$,[(0,a._)("div",A,[(0,a._)("table",G,[(0,a._)("thead",J,[(0,a._)("tr",null,[O,P,X,(0,a._)("th",ee,[(0,a._)("button",{class:"p-2 w-1/8 rounded-md bg-green-800 text-green-100",onClick:l[0]||(l[0]=e=>(0,o.SU)(t).showCreateModal())},"Создать роль")])])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(t).role.data,(e=>((0,a.wg)(),(0,a.iD)("tbody",{class:"bg-white divide-y divide-gray-200 dark:divide-gray-700 dark:bg-gray-900",key:e.id},[(0,a._)("tr",null,[(0,a._)("td",te,[(0,a._)("div",le,[(0,a._)("span",null,(0,r.zw)(e.id),1)])]),(0,a._)("td",ae,[(0,a._)("h2",oe,(0,r.zw)(e.name),1)]),(0,a._)("td",re,[(0,a._)("div",se,[(0,a._)("button",{onClick:l=>(0,o.SU)(t).showUpdateModal(e.id),class:"text-blue-500 transition-colors duration-200 hover:text-indigo-500 focus:outline-none"}," Переименовать ",8,de)])]),(0,a._)("td",ie,[(0,a._)("div",ne,[(0,a._)("button",{onClick:l=>(0,o.SU)(t).showDeleteRole(e.id),class:"text-grey-500 transition-colors duration-200 dark:hover:text-red-500 dark:text-red-300 hover:text-indigo-500 focus:outline-none"}," Удалить ",8,ce)])])]),(0,a.kq)(" Конец списка ")])))),128))])])])])])):(0,a.kq)("v-if",!0)]))}}},4908:(e,t,l)=>{l.d(t,{Z:()=>s});var a=l(9305),o=l(2861),r=l(6985);const s=(0,a.Q_)("RoleStore",{state:()=>({toast:(0,r.E)(),role:[],role_id:"",ModalCreate:!1,ModalUpdate:!1,ModalDelete:!1,lader:!1}),actions:{async getRole(){this.loader=!0,await o.Z.get("allRole").then((e=>this.role=e)).catch((e=>this.toast.error("Ошибка, роль не получена!"))),this.loader=!1},async updateRole(e,t){await o.Z.put("updateRoleUser/"+t+"/"+e).then((e=>console.log(e))).catch((e=>this.toast.error("Ошибка, роль не обновлена!")))},async deleteRole(){this.loader=!0,await o.Z.delete("deleteRole/"+this.role_id).then((e=>this.toast.success("Роль с ID: "+this.role_id+", удалена!"))).catch((e=>this.toast.error("Ошибка, роль не обновлена!"))),this.getRole(),this.closeDeleteRole(),this.loader=!1},async updateRoleName(e){this.loader=!0,await o.Z.put("updateRole/"+this.role_id+"?name="+e).then((e=>this.toast.success("Роль переименована на "+e.data.role.name))).catch((e=>this.toast.error("Ошибка, имя не обновлена!"))),this.getRole(),this.closeUpdateModal(),this.loader=!1},async createRole(e){this.loader=!0,await o.Z.post("addRole/",{name:e}).then((e=>this.toast.success("Роль "+e.data.role.name+" создана!"))).catch((e=>this.toast.error("Ошибка, роль не создана!"))),this.getRole(),this.closeCreateModal(),this.loader=!1},async showCreateModal(){this.ModalCreate=!0},async showUpdateModal(e){this.role_id=e,this.ModalUpdate=!0},async showDeleteRole(e){this.role_id=e,this.ModalDelete=!0},async closeCreateModal(){this.ModalCreate=!1},async closeUpdateModal(){this.role_id="",this.ModalUpdate=!1},async closeDeleteRole(){this.ModalDelete=!1,this.role_id=""}}})}}]);